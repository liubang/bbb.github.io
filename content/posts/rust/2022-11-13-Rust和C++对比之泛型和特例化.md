---
title: "Rust和C++: 泛型和特例化"
date: "2022-11-12"
categories:
  - programming
tags:
  - Rust
---

## 泛型入门：输入的类型

C++和 Rust 中的泛型都是一种将其他类型作为其定义的一部分的类型。泛型是通过在类型定义中指定占位符的一种方式，然后可以
使用更具体的类型来替换，例如在 C++中可以这样写：

```cpp
template<typename T>
struct MyArray {
    T* raw_array;
    std::size_t size;
};
```

如此一来，我们可以说`MyArray<int>`和`MyArray<std::string>`是不同的类型。我们可以通过指定具体的`T`类型，复用`MyArray`这个泛型结构体。
泛型不仅仅局限于结构体，我们同样也能写出泛型函数：

```cpp
template<typename T>
T timestwo(T number) {
    return number + number;
}
```

这里，我们定义了一个非常简单的函数，用来将数值加倍。同样的，`timestwo<int>`和`timestwo<double>`也不是同一个函数。

要在 Rust 中实现上面的函数，可能稍微复杂一点：

```rust
use std::ops::Add;

fn timestwo<T>(number: T) -> <T as Add>::Output
where
    T: Add + Copy,
{
    number + number
}
```

上面 Rust 版本跟 C++版本相比看上去多了很多额外的语法。其中主要的区别是我们调用了特征边界检查，也就是`T: Add + Copy`，
或者用更通俗的话来说，`T`类型必须实现`Add`和`Copy` traits。

### 特征(traits)


