<!doctype html><html lang=zh-cn data-palette="blue gray"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>文章 - liubang's blog</title><link rel=apple-touch-icon href=/images/icons/icon-180x180.png sizes=180x180><link rel=icon href=/images/icons/icon-32x32.png sizes=32x32 type=image/png><link rel=icon href=/images/icons/icon-16x16.png sizes=16x16 type=image/png><link rel=icon href=/images/icons/favicon.ico><link rel=manifest href=/zh-cn/manifest.json><meta name=keywords content="blog,博客"><meta name=description content="这是刘邦的blog"><meta name=robots content="index, follow"><meta itemprop=name content="文章"><meta itemprop=description content="这是刘邦的blog"><meta property="og:title" content="文章"><meta property="og:description" content="这是刘邦的blog"><meta property="og:type" content="website"><meta property="og:url" content="/zh-cn/posts/"><meta name=twitter:card content="summary"><meta name=twitter:title content="文章"><meta name=twitter:description content="这是刘邦的blog"><meta property="og:image" content="/images/logo.png"><meta name=twitter:image content="/images/logo.png"><link rel=alternate type=application/rss+xml href=/zh-cn/posts/index.xml title="liubang's blog"><link rel=stylesheet href=/css/main.min.507afbe6e4670fa3e961a0b35816b5daeb36029866fd6bd7b9d7871fcf88faa5.css integrity="sha256-UHr75uRnD6PpYaCzWBa12us2Aphm/WvXudeHH8+I+qU=" crossorigin=anonymous><link rel=stylesheet href=/css/katex.min.d080a89e03e1eb850f547d835c186b4273f69879aa497eb8b0e88c1578bf1f0b.css integrity="sha256-0ICongPh64UPVH2DXBhrQnP2mHmqSX64sOiMFXi/Hws=" crossorigin=anonymous><link rel=stylesheet href=/css/viewer.min.3d228794bcedbbfa0412beb8fbc1ec6973202945e42af7004f742a4d7bd620ab.css integrity="sha256-PSKHlLztu/oEEr64+8HsaXMgKUXkKvcAT3QqTXvWIKs=" crossorigin=anonymous></head><body><script>const items=["mode","palette"];items.forEach(function(e){const t=localStorage.getItem("hbs-"+e);t&&document.body.parentElement.setAttribute("data-"+e,t)})</script><header><nav class="navbar top-app-bar top-app-bar-expand-lg fixed-top"><div class=container><button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<i class="fas fa-bars"></i>
</button><a class="navbar-brand flex-grow-1 flex-lg-grow-0 text-center text-lg-start mx-auto me-lg-3" href=/zh-cn/><img class=logo alt=Logo src=/images/logo.webp loading=lazy width=136 height=69>
LIUBANG</a><div class="offcanvas offcanvas-bottom surface" tabindex=-1 id=offcanvasSocialShare aria-labelledby=offcanvasSocialShare><div class=offcanvas-header><h3 class=offcanvas-title>Share</h3><button type=button class="btn btn-sm btn-outline-primary" data-bs-dismiss=offcanvas aria-label=Close>
<i class="fas fa-times"></i></button></div><div class=offcanvas-body><a class="btn btn-sm btn-outline-primary social-share-button" rel="noopener noreferrer" aria-label="Twitter Share Button" target=_blank href="https://twitter.com/intent/tweet?title=%e6%96%87%e7%ab%a0&url=%2fzh-cn%2fposts%2f"><i class="fab fa-fw fa-twitter"></i> Twitter</a>
<a class="btn btn-sm btn-outline-primary social-share-button" rel="noopener noreferrer" aria-label="Facebook Share Button" target=_blank href="https://www.facebook.com/sharer/sharer.php?u=%2fzh-cn%2fposts%2f"><i class="fab fa-fw fa-facebook-f"></i> Facebook</a></div></div><button class=navbar-settings type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasSettings aria-controls=offcanvasSettings aria-label="Toggle settings">
<i class="fas fa-ellipsis-v"></i></button><div class="offcanvas offcanvas-end surface h-100" tabindex=-1 id=offcanvasSettings aria-labelledby=offcanvasSettings><div class=offcanvas-header><h3 class=offcanvas-title>设置</h3><button type=button class="btn btn-sm btn-outline-primary" data-bs-dismiss=offcanvas aria-label=Close>
<i class="fas fa-times"></i></button></div><div class="offcanvas-body d-flex flex-column"><section class=setting><form class=row><div class=col-auto><label for=fontSize class=form-label><i class="fas fa-fw fa-language"></i> 语言</label></div><div class="col-auto ms-auto"><div class=dropdown><a class="btn btn-sm btn-outline-primary dropdown-toggle" href=# id=languageDropdown role=button data-bs-toggle=dropdown aria-expanded=false>简体中文</a><ul class="dropdown-menu dropdown-menu-end" aria-labelledby=languageDropdown><li><a class=dropdown-item href=/en/>English</a></li></ul></div></div></form></section><section class=setting><form class=row><div class=col-auto><label><i class="fas fa-fw fa-adjust"></i> 模式</label></div><div class="col-auto ms-auto"><div class="form-check form-switch"><input class=form-check-input type=checkbox id=modeSwitcher></div></div></form></section><section class=setting><form class="font-size-switcher-form row"><div class=col-auto><label for=fontSize class=form-label><i class="fas fa-fw fa-font"></i> 字体大小</label></div><div class="col-auto ms-auto"><input type=range class=form-range min=-2 max=2 id=fontSize></div></form></section><section class="setting palettes"><form class=row><div class=col-auto><label><i class="fas fa-fw fa-palette"></i> 配色</label></div><div class="col-auto ms-auto"><a id=btnPalette class="btn btn-sm btn-outline-primary" role=button aria-label=palettePicker><i class="fas fa-eye-dropper"></i></a></div></form><div class="mt-2 d-flex justify-content-between visually-hidden" id=palettePicker><button type=button id=palette-blue aria-label=蓝色 class="btn btn-sm w-100 palette" data-palette=blue>
</button><button type=button id=palette-blue-gray aria-label=蓝灰色 class="btn btn-sm w-100 palette" data-palette=blue-gray>
</button><button type=button id=palette-brown aria-label=棕色 class="btn btn-sm w-100 palette" data-palette=brown>
</button><button type=button id=palette-cyan aria-label=青色 class="btn btn-sm w-100 palette" data-palette=cyan>
</button><button type=button id=palette-green aria-label=绿色 class="btn btn-sm w-100 palette" data-palette=green>
</button><button type=button id=palette-indigo aria-label=靛青色 class="btn btn-sm w-100 palette" data-palette=indigo>
</button><button type=button id=palette-orange aria-label=橙色 class="btn btn-sm w-100 palette" data-palette=orange>
</button><button type=button id=palette-pink aria-label=粉色 class="btn btn-sm w-100 palette" data-palette=pink>
</button><button type=button id=palette-purple aria-label=紫色 class="btn btn-sm w-100 palette" data-palette=purple>
</button><button type=button id=palette-red aria-label=红色 class="btn btn-sm w-100 palette" data-palette=red>
</button><button type=button id=palette-teal aria-label=蓝绿色 class="btn btn-sm w-100 palette" data-palette=teal>
</button><button type=button id=palette-yellow aria-label=黄色 class="btn btn-sm w-100 palette" data-palette=yellow></button></div></section><section class="setting actions d-flex justify-content-around mt-auto overflow-auto"><a role=button class="action action-go-back" href="javascript: window.history.back();"><span class=action-icon><i class="fas fa-2x fa-arrow-left"></i></span> 返回</a>
<a role=button class="action action-reload-page"><span class=action-icon><i class="fas fa-2x fa-redo-alt"></i></span> 刷新</a>
<a role=button class="action action-copy-url"><span class=action-icon><i class="fas fa-2x fa-link"></i></span> 复制链接
</a><a class="action action-social-share" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasSocialShare aria-controls=offcanvasSocialShare aria-label="Toggle social share"><span class=action-icon><i class="fas fa-2x fa-share-alt"></i></span> 分享</a></section></div></div><div class="collapse navbar-collapse" tabindex=-1 id=navbarSupportedContent aria-labelledby=navbarSupportedContent><form class="search-bar my-1" action=/zh-cn/search><div class="input-group input-group-sm"><span class="btn btn-search disabled position-absolute left-0"><i class="fas fa-fw fa-search"></i></span>
<input class="form-control rounded-pill" name=q type=search aria-label=Search></div></form><ul class="navbar-nav ms-auto"><li class=nav-item><a class=nav-link href=/zh-cn/series/><i class="fas fa-fw fa-columns"></i>专栏</a></li><li class=nav-item><a class=nav-link href=/zh-cn/archives/><i class="fas fa-fw fa-file-archive"></i>归档</a></li><li class=nav-item><a class=nav-link href=/zh-cn/categories/><i class="fas fa-fw fa-folder"></i>分类</a></li><li class=nav-item><a class=nav-link href=/zh-cn/tags/><i class="fas fa-fw fa-tags"></i>标签</a></li></ul></div></div></nav></header><main role=main class=container><div class="row content"><div class=col-lg-8><div class=container><nav class="row card component" aria-label=breadcrumb><div class=card-body><ol class=breadcrumb><li class=breadcrumb-item><a href=/zh-cn/>主页</a></li><li class="breadcrumb-item active">文章</li></ol></div></nav><div class="posts mb-4"><article class="row card post component"><div class=card-header><h2 class="card-title post-title"><a href=/zh-cn/posts/cpp/2022-03-18-c++17-constexpr_if/>C++17:constexpr If</a></h2></div><div class=card-body><div class=post-meta><span class=post-date title="创建于 2022-03-18 00:00:00 +0000 UTC。">2022-03-18
</span><span class=post-reading-time>2 分钟阅读
</span><span class=post-taxonomies><a href=/zh-cn/categories/c++/ class="badge post-taxonomy">c++</a><a href=/zh-cn/tags/c++/ class="badge post-taxonomy">c++</a><a href=/zh-cn/tags/c++17/ class="badge post-taxonomy">c++17</a></span></div><div class=post-summary><p>constexpr 是 c++11 引入的关键字，用于编译时常量和常量表达式。而 c++17 将这一特性做了增强，引入了 constexpr if ， 使得编译器在编译时(compile time)能够做分支判断，从而有条件的编译代码。
下面可以通过一个简单的例子来看看constexpr if的用法：
1#include &lt;iostream>2#include &lt;type_traits>3 4template&lt;typename T> auto getValue(T t) 5{ 6if constexpr (std::is_pointer&lt;T>::value) { 7return *t; 8} else { 9return t;...</p><div><a class="btn btn-sm btn-primary btn-read-more" href=/zh-cn/posts/cpp/2022-03-18-c++17-constexpr_if/>阅读更多</a></div></div></div></article><article class="row card post component"><div class=card-header><h2 class="card-title post-title"><a href=/zh-cn/posts/cpp/2022-03-15-c++20-designated_initializers/>C++20:Designated Initializers</a></h2></div><div class=card-body><div class=post-meta><span class=post-date title="创建于 2022-03-15 00:00:00 +0000 UTC。">2022-03-15
</span><span class=post-reading-time>2 分钟阅读
</span><span class=post-taxonomies><a href=/zh-cn/categories/c++/ class="badge post-taxonomy">c++</a><a href=/zh-cn/tags/c++/ class="badge post-taxonomy">c++</a><a href=/zh-cn/tags/c++20/ class="badge post-taxonomy">c++20</a></span></div><div class=post-summary><p>对于熟悉 c99 的人来说，Designated Initializers 并不算是什么新鲜事物，然而 c++直到 c++20 才正式支持这一特性。 虽然在 c++20 之前，像 GCC 这样的编译器通过扩展的形式已经对该特性做了支持，但是随着 c++20 将其纳入新标准，这一特性将在所有编译器中得到支持。
基本用法 Designated Initialization 是聚合初始化(Aggregate Initialization)的一种形式。 在 c++20 中，聚合类型(Aggregate types)是指：
数组类型 具备如下特性的 class 类型： has no private or protected direct...</p><div><a class="btn btn-sm btn-primary btn-read-more" href=/zh-cn/posts/cpp/2022-03-15-c++20-designated_initializers/>阅读更多</a></div></div></div></article><article class="row card post component"><div class=card-header><h2 class="card-title post-title"><a href=/zh-cn/posts/cpp/2022-02-22-c++%E5%85%83%E7%BC%96%E7%A8%8B%E4%B9%8B%E9%81%8D%E5%8E%86tuple/>C++元编程之遍历tuple</a></h2></div><div class=card-body><div class=post-meta><span class=post-date title="创建于 2022-02-22 00:00:00 +0000 UTC。">2022-02-22
</span><span class=post-reading-time>3 分钟阅读
</span><span class=post-taxonomies><a href=/zh-cn/categories/c++/ class="badge post-taxonomy">c++</a><a href=/zh-cn/tags/c++/ class="badge post-taxonomy">c++</a><a href=/zh-cn/tags/template/ class="badge post-taxonomy">template</a></span></div><div class=post-summary><p>对于一个标准的 c++容器来说，我们可以很容易在运行时使用迭代器和 range-based for loop 来遍历其中的每一个元素。但是对于std::tuple，却不能像普通的容器那样去遍历它。
std::tuple 简介 std::tuple是一个具有固定大小，包含不同类型值的集和。与之相似的是std::pair，只不过std::pair只能容纳两个元素， 而std::tuple可以容纳许多元素：
1std::tuple&lt;int, double, const char*> tup {42, 10.5, "hello"}; 23// or with CTAD(class template argument deduction),...</p><div><a class="btn btn-sm btn-primary btn-read-more" href=/zh-cn/posts/cpp/2022-02-22-c++%E5%85%83%E7%BC%96%E7%A8%8B%E4%B9%8B%E9%81%8D%E5%8E%86tuple/>阅读更多</a></div></div></div></article><article class="row card post component"><div class=card-header><h2 class="card-title post-title"><a href=/zh-cn/posts/cpp/2022-02-14-c++17%E4%B9%8Bstring_view/>C++17:string_view</a></h2></div><div class=card-body><div class=post-meta><span class=post-date title="创建于 2022-02-14 00:00:00 +0000 UTC。">2022-02-14
</span><span class=post-reading-time>5 分钟阅读
</span><span class=post-taxonomies><a href=/zh-cn/categories/c++/ class="badge post-taxonomy">c++</a><a href=/zh-cn/tags/c++/ class="badge post-taxonomy">c++</a><a href=/zh-cn/tags/c++17/ class="badge post-taxonomy">c++17</a></span></div><div class=post-summary><p>string_view 简介 std::string_view是 c++17 中新增的一种类型。其核心理念是，能够让我们在传统的 C++03 风格的具体性和泛型编程之间找到一个很好的折衷点。 在 C++17 标准之前，我们通常只能在粗糙的不严谨的模板实现和相对严谨但是有着冗长约束的模板之间做出选择。举个简单的例子：
1// c++03 style 2class Widget 3{ 4std::string name_; 56public: 7void setName(const char* new_name); 8void setName(const std::string& new_name); 9}; 1011// 不正确的欠约...</p><div><a class="btn btn-sm btn-primary btn-read-more" href=/zh-cn/posts/cpp/2022-02-14-c++17%E4%B9%8Bstring_view/>阅读更多</a></div></div></div></article><article class="row card post component"><div class=card-header><h2 class="card-title post-title"><a href=/zh-cn/posts/storage/2021-01-12-leveldb%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E4%B9%8Bcompaction/>LevelDB 源码阅读之 Compaction</a></h2></div><div class=card-body><div class=post-meta><span class=post-date title="创建于 2021-01-12 00:00:00 +0000 UTC。">2021-01-12
</span><span class=post-reading-time>7 分钟阅读
</span><span class=post-taxonomies><a href=/zh-cn/categories/storage/ class="badge post-taxonomy">storage</a><a href=/zh-cn/tags/leveldb/ class="badge post-taxonomy">leveldb</a><a href=/zh-cn/tags/storage/ class="badge post-taxonomy">storage</a></span></div><div class=post-summary><p>1. 概览 要谈论 LevelDB 的 Compaction 就不得不从 LevelDB 的整个数据写入流程入手。LevelDB 的基本写入流程大致为：
数据先写入到 WAL 日志中，做持久化 然后数据同步到mutable memtable中 当mutable memtable大小达到Options.write_buffer_size设置的大小时，就会变成immutable memtable，并且创建一个新的mutable memtable 后台的 Compaction 线程会把immutable memtabledump 成 sstable 文件，并设置于 Level 0 层 当 Level i 达到一定条件后，...</p><div><a class="btn btn-sm btn-primary btn-read-more" href=/zh-cn/posts/storage/2021-01-12-leveldb%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E4%B9%8Bcompaction/>阅读更多</a></div></div></div></article><article class="row card post component"><div class=card-header><h2 class="card-title post-title"><a href=/zh-cn/posts/inf/2020-05-25-%E5%88%86%E5%B8%83%E5%BC%8F%E5%8D%8F%E8%AE%AE/>分布式协议</a></h2></div><div class=card-body><div class=post-meta><span class=post-date title="创建于 2020-05-25 00:00:00 +0000 UTC。">2020-05-25
</span><span class=post-reading-time>6 分钟阅读
</span><span class=post-taxonomies><a href=/zh-cn/categories/inf/ class="badge post-taxonomy">inf</a><a href=/zh-cn/tags/inf/ class="badge post-taxonomy">inf</a><a href=/zh-cn/tags/raft/ class="badge post-taxonomy">raft</a></span></div><div class=post-summary><p>拜占庭将军问题 简介 在可能存在叛军的情况下，采用合适的通讯协议，让多个将军达成共识，执行统一的作战计划 二忠一叛难题 它是分布式领域最复杂的容错模型 莱斯利·兰伯特（Leslie Lamport）The Byzantine Generals Problem 二忠一叛难题 总共有三个将军，其中一个作为指挥官 通过信使相互传递作战指令，进攻或者撤退 所有忠诚的将军必须执行统一的作战计划，忠诚的将军必须执行忠诚的指挥官发布的指令 假如 LIEUTENANT2 叛变，LIEUTENANT1 收到的作战指令就是“进攻，撤退” 假如 COMMANDER 叛变，LIEUTENANT1 和 LIEUTENANT2 收到的作战指令都是“进攻，...</p><div><a class="btn btn-sm btn-primary btn-read-more" href=/zh-cn/posts/inf/2020-05-25-%E5%88%86%E5%B8%83%E5%BC%8F%E5%8D%8F%E8%AE%AE/>阅读更多</a></div></div></div></article><article class="row card post component"><div class=card-header><h2 class="card-title post-title"><a href=/zh-cn/posts/sp/2019-08-18-c%E8%AF%AD%E8%A8%80%E6%A8%A1%E6%8B%9Flisp%E8%AF%AD%E6%B3%95/>使用c语言模拟lisp语法</a></h2></div><div class=card-body><div class=post-meta><span class=post-date title="创建于 2019-08-18 00:00:00 +0000 UTC。">2019-08-18
</span><span class=post-reading-time>1 分钟阅读
</span><span class=post-taxonomies><a href=/zh-cn/categories/sp/ class="badge post-taxonomy">sp</a><a href=/zh-cn/tags/c/ class="badge post-taxonomy">c</a><a href=/zh-cn/tags/sp/ class="badge post-taxonomy">sp</a></span></div><div class=post-summary><p>使用 c 语言的 macro 操作，能够很简单的用 c 语言模拟 lisp 语法。
下面我们来定义 lisp.h 头文件 1#ifndef LISP_H_OTE1HWPK 2#define LISP_H_OTE1HWPK 34#include &lt;stdio.h> 5#include &lt;stdlib.h> 67#define define(ret, name, args, block) \ 8ret name args { return block; } 910#define if(expr, block1, block2) \ 11expr ? block1 : block2 1213#define eq(a, b) \ 14a...</p><div><a class="btn btn-sm btn-primary btn-read-more" href=/zh-cn/posts/sp/2019-08-18-c%E8%AF%AD%E8%A8%80%E6%A8%A1%E6%8B%9Flisp%E8%AF%AD%E6%B3%95/>阅读更多</a></div></div></div></article><article class="row card post component"><div class=card-header><h2 class="card-title post-title"><a href=/zh-cn/posts/sp/2019-07-18-%E5%8A%A8%E6%80%81%E8%BF%9E%E6%8E%A5%E5%99%A8%E6%8A%80%E5%B7%A7%E4%B9%8B%E4%BD%BF%E7%94%A8ld_preload%E6%94%B9%E5%8F%98%E7%A8%8B%E5%BA%8F%E7%9A%84%E8%A1%8C%E4%B8%BA/>动态连接器技巧之使用LD_PRELOAD改变程序的行为</a></h2></div><div class=card-body><div class=post-meta><span class=post-date title="创建于 2019-07-18 00:00:00 +0000 UTC。">2019-07-18
</span><span class=post-reading-time>3 分钟阅读
</span><span class=post-taxonomies><a href=/zh-cn/categories/sp/ class="badge post-taxonomy">sp</a><a href=/zh-cn/tags/c/ class="badge post-taxonomy">c</a><a href=/zh-cn/tags/sp/ class="badge post-taxonomy">sp</a></span></div><div class=post-summary><p>我们有这样一段简单的代码，用来输出 10 个[0, 100)的随机数：
1// random.c 2#include &lt;stdio.h>3#include &lt;stdlib.h>4#include &lt;time.h>5 6int main() { 7srand(time(NULL)); 8int i = 10; 9while (i--) printf("%d\n", rand() % 100); 10return 0; 11} 编译运行：
1liubang@venux-dev:~$ gcc random.c -o random 2liubang@venux-dev:~$ ./random 344 446 597 651 762 876...</p><div><a class="btn btn-sm btn-primary btn-read-more" href=/zh-cn/posts/sp/2019-07-18-%E5%8A%A8%E6%80%81%E8%BF%9E%E6%8E%A5%E5%99%A8%E6%8A%80%E5%B7%A7%E4%B9%8B%E4%BD%BF%E7%94%A8ld_preload%E6%94%B9%E5%8F%98%E7%A8%8B%E5%BA%8F%E7%9A%84%E8%A1%8C%E4%B8%BA/>阅读更多</a></div></div></div></article><article class="row card post component"><div class=card-header><h2 class="card-title post-title"><a href=/zh-cn/posts/sp/2018-12-05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/>多线程编程</a></h2></div><div class=card-body><div class=post-meta><span class=post-date title="创建于 2018-12-05 00:00:00 +0000 UTC。">2018-12-05
</span><span class=post-reading-time>15 分钟阅读
</span><span class=post-taxonomies><a href=/zh-cn/categories/sp/ class="badge post-taxonomy">sp</a><a href=/zh-cn/tags/c/ class="badge post-taxonomy">c</a><a href=/zh-cn/tags/sp/ class="badge post-taxonomy">sp</a></span></div><div class=post-summary><p>开始之前 这篇文章主要是为了帮助大家熟悉 POSIX 线程库以及在实际开发中使用它的特性。我们会具体讲解如何利用这个线程库定义的不同工具 来解决编程中的问题。当然这里隐含了一个假设，就是读者已经了解过并行编程（或者多进程）的相关概念，如果没有这些背景知识 的话，读者可能会感觉到很难理解。不过也没关系，我的另一篇教程里边有专门为只具备线性编程思维的读者提供了对并行编程理论 和相关术语的讲解。
同样的，我假设聪明的你已经熟悉了异步编程模型，那些经常使用桌面环境的人会更容易去接受多线程编程的理念。
当我们谈到 POSIX 线程的时候，肯定会有人心生疑惑：“我们应该使用哪个标准下的 POSIX 线程？”。由于 POSIX 线程标准已经修订了...</p><div><a class="btn btn-sm btn-primary btn-read-more" href=/zh-cn/posts/sp/2018-12-05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/>阅读更多</a></div></div></div></article><article class="row card post component"><div class=card-header><h2 class="card-title post-title"><a href=/zh-cn/posts/php/2018-04-16-%E4%BD%BF%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%BC%80%E5%8F%91%E4%B8%80%E4%B8%AA%E9%AB%98%E6%80%A7%E8%83%BD%E8%B7%AF%E7%94%B1/>使用正则表达式开发一个高性能路由</a></h2></div><div class=card-body><div class=post-meta><span class=post-date title="创建于 2018-04-16 00:00:00 +0000 UTC。">2018-04-16
</span><span class=post-reading-time>8 分钟阅读
</span><span class=post-taxonomies><a href=/zh-cn/categories/php/ class="badge post-taxonomy">php</a><a href=/zh-cn/tags/php/ class="badge post-taxonomy">php</a></span></div><div class=post-summary><p>原文地址：http://nikic.github.io/2014/02/18/Fast-request-routing-using-regular-expressions.html
前一些日子，我发现了一个叫做Pux的路由库，这个路由库声称自己比现有的路由要快很多，为了实现这个特点，该库使用了 C 语言编写了 PHP 扩展。
然而，当我瞅了几眼它的代码后，我非常怀疑这个库在路由过程中做了错误的优化，而且我能够很容易在不适用扩展的情况下做出更高性能的实现。 当我在看了 benchmarking 代码后更加确定了我的怀疑，因为我发现这里仅仅只是对及其确定的单个路由做了测试。
为了进一步研究这个问题，我写了一个轻量的路由...</p><div><a class="btn btn-sm btn-primary btn-read-more" href=/zh-cn/posts/php/2018-04-16-%E4%BD%BF%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%BC%80%E5%8F%91%E4%B8%80%E4%B8%AA%E9%AB%98%E6%80%A7%E8%83%BD%E8%B7%AF%E7%94%B1/>阅读更多</a></div></div></div></article></div><div class="row table-responsive mb-3"><ul class="pagination pagination-default"><li class="page-item disabled"><a aria-disabled=true aria-label=First class=page-link role=button tabindex=-1><span aria-hidden=true>&#171;&#171;</span></a></li><li class="page-item disabled"><a aria-disabled=true aria-label=Previous class=page-link role=button tabindex=-1><span aria-hidden=true>&#171;</span></a></li><li class="page-item active"><a aria-current=page aria-label="Page 1" class=page-link role=button>1</a></li><li class=page-item><a href=/zh-cn/posts/page/2/ aria-label="Page 2" class=page-link role=button>2</a></li><li class=page-item><a href=/zh-cn/posts/page/3/ aria-label="Page 3" class=page-link role=button>3</a></li><li class=page-item><a href=/zh-cn/posts/page/4/ aria-label="Page 4" class=page-link role=button>4</a></li><li class=page-item><a href=/zh-cn/posts/page/2/ aria-label=Next class=page-link role=button><span aria-hidden=true>&#187;</span></a></li><li class=page-item><a href=/zh-cn/posts/page/4/ aria-label=Last class=page-link role=button><span aria-hidden=true>&#187;&#187;</span></a></li></ul></div></div></div><aside class="col-lg-4 sidebar d-flex"><div class="container d-flex flex-column"><section class="card row text-center profile component"><div class=card-body><div class="col-12 d-flex align-items-center justify-content-center"><img class="profile-avatar rounded-circle" alt=liubang src=/images/profile.webp loading=lazy width=1000 height=1000></div><div class="col-12 profile-meta"><div class=profile-name>liubang</div><div class=profile-bio>Whether you are an antelope or a lion, you ought to dash forward without hesitation when the sun rise</div><div class=profile-company><i class="fas fa-fw fa-building"></i>Baidu</div><div class=profile-location><i class="fas fa-fw fa-map-marker-alt"></i>Beijing</div><nav class="social-links nav justify-content-center"><a class="nav-link social-link" href=mailto:it.liubang@gmail.com title=Email><i class="fas fa-fw fa-2x fa-envelope"></i>
</a><a class="nav-link social-link" target=_blank href=https://github.com/liubang title=GitHub rel="noopener noreferrer"><i class="fa-fw fa-2x fab fa-github"></i>
</a><a class="nav-link social-link" target=_blank href=https://weibo.com/2113750192 title=Weibo rel="noopener noreferrer"><i class="fa-fw fa-2x fab fa-weibo"></i>
</a><a class="nav-link social-link" target=_blank href=/zh-cn/posts/index.xml title=RSS rel="noopener noreferrer"><i class="fas fa-fw fa-2x fa-rss"></i></a></nav></div></div></section><section class="recent-posts row card component"><div class=card-header><h2 class=card-title>最近文章</h2></div><div class=card-body><ul class=post-list><li><a href=/zh-cn/posts/cpp/2022-03-18-c++17-constexpr_if/>C++17:constexpr If</a></li><li><a href=/zh-cn/posts/cpp/2022-03-15-c++20-designated_initializers/>C++20:Designated Initializers</a></li><li><a href=/zh-cn/posts/cpp/2022-02-22-c++%E5%85%83%E7%BC%96%E7%A8%8B%E4%B9%8B%E9%81%8D%E5%8E%86tuple/>C++元编程之遍历tuple</a></li><li><a href=/zh-cn/posts/cpp/2022-02-14-c++17%E4%B9%8Bstring_view/>C++17:string_view</a></li><li><a href=/zh-cn/posts/storage/2021-01-12-leveldb%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E4%B9%8Bcompaction/>LevelDB 源码阅读之 Compaction</a></li></ul></div></section><section class="categories-taxonomies row card component"><div class=card-header><h2 class=card-title><a href=/zh-cn/categories>分类</a></h2></div><div class=card-body><div class=py-2><a href=/zh-cn/categories/c++/ class="badge rounded post-taxonomy" title=c++>c++<span class="badge badge-sm text-white bg-accent ms-1">12</span></a><a href=/zh-cn/categories/php/ class="badge rounded post-taxonomy" title=php>
php<span class="badge badge-sm text-white bg-accent ms-1">8</span></a><a href=/zh-cn/categories/sp/ class="badge rounded post-taxonomy" title=sp>
sp<span class="badge badge-sm text-white bg-accent ms-1">6</span></a><a href=/zh-cn/categories/java/ class="badge rounded post-taxonomy" title=java>
java<span class="badge badge-sm text-white bg-accent ms-1">3</span></a><a href=/zh-cn/categories/compiler/ class="badge rounded post-taxonomy" title=compiler>
compiler<span class="badge badge-sm text-white bg-accent ms-1">1</span></a><a href=/zh-cn/categories/ds/ class="badge rounded post-taxonomy" title=ds>
ds<span class="badge badge-sm text-white bg-accent ms-1">1</span></a><a href=/zh-cn/categories/inf/ class="badge rounded post-taxonomy" title=inf>
inf<span class="badge badge-sm text-white bg-accent ms-1">1</span></a><a href=/zh-cn/categories/storage/ class="badge rounded post-taxonomy" title=storage>
storage<span class="badge badge-sm text-white bg-accent ms-1">1</span></a></div></div></section><section class="tags-taxonomies row card component"><div class=card-header><h2 class=card-title><a href=/zh-cn/tags>标签</a></h2></div><div class=card-body><div class=py-2><a href=/zh-cn/tags/c/ class="badge rounded post-taxonomy" title=c>c<span class="badge badge-sm text-white bg-accent ms-1">14</span></a><a href=/zh-cn/tags/c++/ class="badge rounded post-taxonomy" title=c++>
c++<span class="badge badge-sm text-white bg-accent ms-1">12</span></a><a href=/zh-cn/tags/php/ class="badge rounded post-taxonomy" title=php>
php<span class="badge badge-sm text-white bg-accent ms-1">8</span></a><a href=/zh-cn/tags/sp/ class="badge rounded post-taxonomy" title=sp>
sp<span class="badge badge-sm text-white bg-accent ms-1">5</span></a><a href=/zh-cn/tags/java/ class="badge rounded post-taxonomy" title=Java>
Java<span class="badge badge-sm text-white bg-accent ms-1">3</span></a><a href=/zh-cn/tags/jni/ class="badge rounded post-taxonomy" title=JNI>
JNI<span class="badge badge-sm text-white bg-accent ms-1">3</span></a><a href=/zh-cn/tags/c++17/ class="badge rounded post-taxonomy" title=c++17>
c++17<span class="badge badge-sm text-white bg-accent ms-1">2</span></a><a href=/zh-cn/tags/compiler/ class="badge rounded post-taxonomy" title=compiler>
compiler<span class="badge badge-sm text-white bg-accent ms-1">2</span></a><a href=/zh-cn/tags/algorithm/ class="badge rounded post-taxonomy" title=algorithm>
algorithm<span class="badge badge-sm text-white bg-accent ms-1">1</span></a><a href=/zh-cn/tags/c++20/ class="badge rounded post-taxonomy" title=c++20>
c++20<span class="badge badge-sm text-white bg-accent ms-1">1</span></a></div></div></section></div></aside></div></main><footer class="footer mt-auto py-3 text-center container"><nav class="social-links nav justify-content-center mb-2"><a class="nav-link social-link" href=mailto:it.liubang@gmail.com title=Email><i class="fas fa-fw fa-2x fa-envelope"></i>
</a><a class="nav-link social-link" target=_blank href=https://github.com/liubang title=GitHub rel="noopener noreferrer"><i class="fa-fw fa-2x fab fa-github"></i>
</a><a class="nav-link social-link" target=_blank href=https://weibo.com/2113750192 title=Weibo rel="noopener noreferrer"><i class="fa-fw fa-2x fab fa-weibo"></i>
</a><a class="nav-link social-link" target=_blank href=/zh-cn/posts/index.xml title=RSS rel="noopener noreferrer"><i class="fas fa-fw fa-2x fa-rss"></i></a></nav><div class="copyright mb-2">Copyright © 2016-2022 LiuBang. All Rights Reserved.</div><div class="powered-by mb-2">Powered by <a href=https://gohugo.io target=_blank rel="noopener noreferrer">Hugo</a> and the <a href=https://github.com/razonyang/hugo-theme-bootstrap target=_blank rel="noopener noreferrer">Bootstrap</a> theme.</div></footer><script src=/js/main.6894e9f08732f95413a84b46fe3820cd75dfaab3cd7235ca5518ea5376666801.js integrity="sha256-aJTp8Icy+VQTqEtG/jggzXXfqrPNcjXKVRjqU3ZmaAE=" crossorigin=anonymous defer></script><script src=/js/icons.min.9d2ffa3761d1fc3f2b70b7d0727df781314311765f60541ec864acf5e84e3acb.js integrity="sha256-nS/6N2HR/D8rcLfQcn33gTFDEXZfYFQeyGSs9ehOOss=" crossorigin=anonymous defer></script>
<script>"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(function(e){console.log("Successfully registered service worker",e)}).catch(function(e){console.warn("Error whilst registering service worker",e)})})</script><script src=/js/viewer.min.56cda9e4d5250af6a4ac0304cbfdfa39dfb9288c83167984c4ed7fbe2a54c34d.js integrity="sha256-Vs2p5NUlCvakrAMEy/36Od+5KIyDFnmExO1/vipUw00=" crossorigin=anonymous defer></script><script defer src=/js/katex.min.30210cbd721d9d3089e7b0b0f71cd47592d29fb0d76a2d987116479aa953b118.js integrity="sha256-MCEMvXIdnTCJ57Cw9xzUdZLSn7DXai2YcRZHmqlTsRg=" crossorigin=anonymous></script>
<script defer src=/js/mermaid.min.d150a14f745398a69a2abfee2cb0ed3cecd883ef10e777386cdfca73b8490fbc.js integrity="sha256-0VChT3RTmKaaKr/uLLDtPOzYg+8Q53c4bN/Kc7hJD7w=" crossorigin=anonymous></script></body></html>